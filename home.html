<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>TRIBERIUM — Home</title>

<!-- Favicon -->
<link rel="icon" href="pwa/icons/icon-192x192.png">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- External Styles -->
<link rel="stylesheet" href="css/feedStyles.css">
<link rel="stylesheet" href="css/profileStyles.css">
<link rel="stylesheet" href="css/walletStyles.css">
<link rel="stylesheet" href="css/notificationsStyles.css">
<link rel="stylesheet" href="css/searchStyles.css">

<style>

/* =========================
   GLOBAL RESET & STRUCTURE
========================= */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  overflow-x: hidden;            /* CRITICAL FIX */
  font-family: 'Inter', sans-serif;
  background: #f5f8fa;
  color: #111;
}

/* Root App Container */
.app-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100%;
  position: relative;
}

/* =========================
   HEADER
========================= */

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 18px;
  background: #ffffff;
  border-bottom: 1px solid #e6ecf0;
  position: sticky;
  top: 0;
  z-index: 1000;
}

.logo {
  font-weight: 700;
  font-size: 1.4rem;
  color: #1d72b8;
  cursor: pointer;
}

.menu-btn {
  border: none;
  background: none;
  font-size: 1.4rem;
  cursor: pointer;
}

/* =========================
   WALLET BAR
========================= */

.wallet-bar {
  background: #ffffff;
  padding: 10px 18px;
  border-bottom: 1px solid #e6ecf0;
  display: flex;
  justify-content: space-between;
  font-weight: 600;
}

/* =========================
   SEARCH
========================= */

.search-wrapper {
  background: #ffffff;
  padding: 12px 18px;
  border-bottom: 1px solid #e6ecf0;
  display: flex;
  gap: 10px;
}

.search-wrapper input {
  flex: 1;
  padding: 10px 14px;
  border-radius: 24px;
  border: 1px solid #ccd6dd;
  outline: none;
}

.search-wrapper button {
  padding: 10px 16px;
  border-radius: 24px;
  border: none;
  background: #1d72b8;
  color: #ffffff;
  font-weight: 600;
  cursor: pointer;
}

/* =========================
   FEED
========================= */

.feed {
  flex: 1;
  padding: 14px 18px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* Post Card */
.post {
  background: #ffffff;
  border-radius: 14px;
  padding: 14px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Post Header */
.post-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.user-info {
  display: flex;
  gap: 10px;
  align-items: center;
}

.user-info img {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  background: #ccd6dd;
}

.user-text {
  display: flex;
  flex-direction: column;
}

.username {
  font-weight: 600;
}

.handle {
  font-size: 0.85rem;
  color: #657786;
}

.follow-btn {
  padding: 6px 14px;
  border-radius: 20px;
  border: none;
  background: #1d72b8;
  color: #ffffff;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
}

/* Post Content */
.post-content {
  line-height: 1.5;
}

/* Post Actions */
.post-actions {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  font-weight: 600;
  color: #1d72b8;
}

.post-actions span {
  cursor: pointer;
}

/* =========================
   SIDE NAV (OFF CANVAS)
========================= */

.side-nav {
  position: fixed;
  top: 0;
  left: -260px;                 /* fully hidden */
  width: 260px;
  height: 100vh;
  background: #ffffff;
  box-shadow: 2px 0 8px rgba(0,0,0,0.15);
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 18px;
  transition: left 0.3s ease;
  z-index: 2000;
}

.side-nav.active {
  left: 0;
}

.side-nav button {
  border: none;
  background: none;
  font-weight: 600;
  font-size: 1rem;
  text-align: left;
  padding: 12px 0;
  cursor: pointer;
  color: #1d72b8;
}

/* =========================
   BOTTOM NAV
========================= */

.bottom-nav {
  display: flex;
  justify-content: space-around;
  background: #ffffff;
  border-top: 1px solid #e6ecf0;
  padding: 10px 0;
  position: sticky;
  bottom: 0;
  z-index: 1000;
}

.bottom-nav button {
  border: none;
  background: none;
  font-weight: 600;
  color: #657786;
  cursor: pointer;
}

.bottom-nav button.active {
  color: #1d72b8;
}

</style>
</head>

<body>

<div class="app-container">

<header class="app-header">
  <div class="logo" onclick="navigateBottom('home')">TRIBERIUM</div>
  <button class="menu-btn" onclick="toggleSideNav()">☰</button>
</header>

<!-- Side Navigation -->
<aside class="side-nav" id="sideNav">
  <button onclick="navigateBottom('profile')">Profile</button>
  <button onclick="navigateBottom('wallet')">Wallet</button>
  <button onclick="navigateBottom('notifications')">Notifications</button>
  <button onclick="navigateBottom('search')">Search</button>
  <button onclick="logout()">Logout</button>
</aside>

<div class="wallet-bar">
  <span>Wallet Balance</span>
  <span id="walletBalance">0.00 TBM</span>
</div>

<div class="search-wrapper">
  <input type="text" id="searchInput" placeholder="Search users or posts...">
  <button onclick="handleSearch()">Search</button>
</div>

<main class="feed" id="feedContainer">

  <article class="post" id="post1">

    <div class="post-header">
      <div class="user-info">
        <img alt="Profile picture">
        <div class="user-text">
          <div class="username">Alice Johnson</div>
          <div class="handle">@alice</div>
        </div>
      </div>
      <button class="follow-btn" onclick="followUser('alice')">Follow</button>
    </div>

    <div class="post-content">
      Welcome to TRIBERIUM! Start exploring posts and earning TBM.
    </div>

    <div class="post-actions">
      <span onclick="likePost('post1')">like</span>
      <span onclick="retribePost('post1')">retribe</span>
      <span onclick="savePost('post1')">save</span>
      <span onclick="sharePost('post1')">share</span>
    </div>

  </article>

</main>

<nav class="bottom-nav">
  <button class="active" onclick="navigateBottom('home')">Home</button>
  <button onclick="navigateBottom('wallet')">Wallet</button>
  <button onclick="navigateBottom('notifications')">Notifications</button>
  <button onclick="navigateBottom('profile')">Profile</button>
  <button onclick="navigateBottom('chat')">Chat</button>
</nav>

</div>

<!-- Modules -->
<script type="module" src="js/firebaseModule.js"></script>
<script type="module" src="js/feedModule.js"></script>
<script type="module" src="js/profileModule.js"></script>
<script type="module" src="js/followModule.js"></script>
<script type="module" src="js/walletModule.js"></script>
<script type="module" src="js/notificationsModule.js"></script>
<script type="module" src="js/searchModule.js"></script>

<script>
function toggleSideNav() {
  document.getElementById("sideNav").classList.toggle("active");
}

function handleSearch(){ alert('Search triggered'); }
function likePost(id){ alert('Liked '+id); }
function retribePost(id){ alert('Retribed '+id); }
function savePost(id){ alert('Saved '+id); }
function sharePost(id){ alert('Shared '+id); }
function followUser(id){ alert('Followed '+id); }
function logout(){ alert('Logged out'); }
function navigateBottom(page){ alert(page+' clicked'); }
</script>

</body>
  </html>
