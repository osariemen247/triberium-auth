<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>TRIBERIUM ‚Äî SocialFi</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* ====================== YOUR EXISTING CSS ====================== */
/* ... all your existing CSS stays unchanged ... */
</style>
</head>

<body data-theme="light">

<!-- HEADER -->
<header class="header">
  <div class="header-top">
    <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>

    <div class="brand-container">
      <div class="logo">TRIBERIUM</div>
      <div class="wallet-balance">
        TBM Balance: <span id="walletAmount">0.00</span>
      </div>
    </div>

    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
  </div>

  <div class="header-search">
    <input type="text" placeholder="Search TRIBERIUM...">
  </div>
</header>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <button>Profile</button>
  <button>Metrics / Analytics</button>
  <button>News</button>
  <button>Access Zytherion</button>
  <button>Live Stream</button>
  <button>Saved Posts</button>
  <button>Wallet</button>
  <button>Settings</button>
  <button>Logout</button>
</div>

<!-- MAIN CONTENT -->
<section class="page">
  <div class="card">

    <div class="post-header">
      <div class="post-user">
        <div class="profile-placeholder"></div>
        <div class="username">@TriberiumUser</div>
      </div>
      <button class="follow-btn">Follow</button>
    </div>

    <div class="post-content">
      Welcome to TRIBERIUM SocialFi evolution. Earn, connect, and build.
    </div>

    <div class="post-actions">
      <!-- LIKE -->
      <div class="action-group like-action" onclick="toggleAction(this)">
        <svg viewBox="0 0 24 24">
          <path d="M12 21s-6.7-4.35-9.33-8.33C.68 9.3 2.8 6 6 6c2.04 0 3.17 1.2 4 2.09C10.83 7.2 11.96 6 14 6c3.2 0 5.32 3.3 3.33 6.67C18.7 16.65 12 21 12 21z"/>
        </svg>
        <span>24</span>
      </div>

      <!-- RETRIBE -->
      <div class="action-group retribe-action" onclick="toggleAction(this)">
        <svg viewBox="0 0 24 24">
          <path d="M4 7h11l-3-3m8 13H9l3 3"/>
        </svg>
        <span>8</span>
      </div>

      <!-- SAVE -->
      <div class="action-group save-action" onclick="toggleAction(this)">
        <svg viewBox="0 0 24 24">
          <rect x="4" y="4" width="16" height="16" rx="3"></rect>
          <path d="M8 12l3 3 5-6"></path>
        </svg>
        <span>12</span>
      </div>

      <!-- SHARE -->
      <div class="action-group share-action" onclick="toggleAction(this)">
        <svg viewBox="0 0 24 24">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <path d="M8.7 13.4l6.6 3.2M15.3 7.4L8.7 10.6"></path>
        </svg>
        <span>3</span>
      </div>
    </div>
  </div>
</section>

<nav class="nav">
  <button class="active">Home</button>
  <button>Community</button>
  <button>Chat</button>
  <button>Notifications</button>
</nav>

<script>
function toggleSidebar(){
  document.getElementById("sidebar").classList.toggle("active");
}

/* LIKE / RETRIBE / SAVE / SHARE FUNCTIONS */
function toggleAction(el){
  el.classList.toggle("active");
}

/* THEME TOGGLE */
function toggleTheme(){
  const body = document.body;
  const toggle = document.querySelector(".theme-toggle");
  if(body.getAttribute("data-theme") === "light"){
    body.setAttribute("data-theme","dark");
    toggle.innerText = "‚òÄÔ∏è";
  } else {
    body.setAttribute("data-theme","light");
    toggle.innerText = "üåô";
  }
}
</script>

<!-- ====================== MODULED FIREBASE AUTH / FOLLOW ====================== -->
<script type="module">
import { monitorAuthState, toggleFollow } from './js/firebase/auth.js';

monitorAuthState((user, userData) => {
  if(user) {
    console.log("User logged in:", userData?.username);
    document.querySelectorAll(".follow-btn").forEach(btn => {
      btn.disabled = false; // enable follow buttons
    });
  } else {
    document.querySelectorAll(".follow-btn").forEach(btn => {
      btn.disabled = true;
    });
  }
});

// Connect follow buttons dynamically
document.querySelectorAll(".follow-btn").forEach(btn => {
  btn.addEventListener("click", async () => {
    // TODO: Replace this with the actual UID of the post owner from Firestore
    const targetUserId = "TARGET_USER_UID";
    try {
      const isNowFollowing = await toggleFollow(targetUserId);
      btn.innerText = isNowFollowing ? "Following" : "Follow";
    } catch (err) {
      console.error("Follow error:", err);
    }
  });
});
</script>

</body>
   </html>
