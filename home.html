<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>TRIBERIUM â€” SocialFi</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Modular CSS -->
<link rel="stylesheet" href="css/global.css">
<link rel="stylesheet" href="css/header.css">
<link rel="stylesheet" href="css/sidebar.css">
<link rel="stylesheet" href="css/bottomnav.css">
<link rel="stylesheet" href="css/post.css">
<link rel="stylesheet" href="css/story.css">

</head>
<body data-theme="light">

<!-- ================= HEADER ================= -->
<header class="header">
  <div class="header-top">
    <button class="menu-btn" id="menuBtn">â˜°</button>

    <div class="brand-container">
      <div class="logo">TRIBERIUM</div>
      <div class="wallet-balance">
        TBM Balance: <span id="walletAmount">0.00</span>
      </div>
    </div>

    <button class="theme-toggle" id="themeToggle">ðŸŒ™</button>
  </div>

  <div class="header-search">
    <input type="text" placeholder="Search TRIBERIUM...">
  </div>
</header>

<!-- ================= SIDEBAR ================= -->
<div class="sidebar" id="sidebar">
  <button id="btnProfile">Profile</button>
  <button id="btnMetrics">Metrics / Analytics</button>
  <button id="btnNews">News</button>
  <button id="btnZytherion">Access Zytherion</button>
  <button id="btnLive">Live Stream</button>
  <button id="btnSaved">Saved Posts</button>
  <button id="btnWallet">Wallet</button>
  <button id="btnSettings">Settings</button>
  <button id="btnLogout">Logout</button>
</div>

<!-- ================= STORIES ================= -->
<section class="stories" id="storiesContainer">
  <!-- Dynamic story cards will be appended here -->
</section>

<!-- ================= MAIN FEED ================= -->
<section class="page" id="feedContainer">
  <!-- Post cards dynamically injected via JS -->
</section>

<!-- ================= BOTTOM NAV ================= -->
<nav class="nav">
  <button class="active" id="navHome">Home</button>
  <button id="navTribe">Tribe</button>
  <button id="navChat">Chat</button>
  <button id="navNotifications">Notifications</button>
</nav>

<!-- ================= FIREBASE SDK ================= -->
<script type="module" src="js/firebase-config.js"></script>
<script type="module" src="js/auth.js"></script>
<script type="module" src="js/sidebar.js"></script>
<script type="module" src="js/bottomnav.js"></script>
<script type="module" src="js/header.js"></script>
<script type="module" src="js/story.js"></script>
<script type="module" src="js/post.js"></script>

<script type="module">
import { toggleSidebar } from './js/sidebar.js';
import { toggleTheme } from './js/header.js';
import { fetchStories, uploadStory } from './js/story.js';
import { fetchPosts } from './js/post.js';

// Sidebar toggle
document.getElementById('menuBtn').addEventListener('click', toggleSidebar);

// Theme toggle
document.getElementById('themeToggle').addEventListener('click', toggleTheme);

// Load stories
async function loadStories() {
  const container = document.getElementById('storiesContainer');
  const stories = await fetchStories();
  container.innerHTML = '';
  stories.forEach(story => {
    const storyEl = document.createElement('div');
    storyEl.classList.add('story-card');
    storyEl.innerHTML = `
      <img src="${story.mediaUrl}" alt="Story" />
      <div class="story-username">@${story.userId}</div>
    `;
    container.appendChild(storyEl);
  });
}

loadStories();

// Load posts
fetchPosts('feedContainer');

// Optional: story upload example
// const fileInput = document.createElement('input');
// fileInput.type = 'file';
// fileInput.accept = 'image/*,video/*';
// fileInput.addEventListener('change', e => uploadStory(e.target.files[0]));
// document.body.appendChild(fileInput);
</script>

</body>
</html>
